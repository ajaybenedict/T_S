<div class="container-fluid">
  <div class="row mt-5">
    <!-- Left side - Form -->

    <div class="col-md-4">
      <h5>ION Bulk Product Sync Utility</h5>
      <div>
        <div class="row mb-3">
          <label for="bulkTaskAction" class="col-sm-4 col-form-label">Product Sync Action</label>
          <div class="col-sm-8">
            <select id="bulkTaskAction" class="form-control" [(ngModel)]="selectedTask" required>
              <option value="skuSync">Sku/Plan Sync</option>
              <option value="productSync">Product Sync</option>
            </select>
            <span class="text-danger" *ngIf="validationError && !selectedTask">This field is required.</span>

          </div>
        </div>

        <div class="row mb-3">
          <label for="fileInput" class="col-sm-4 col-form-label">Upload Template File</label>
          <div class="col-sm-8">
            <input type="file" id="fileInput" class="form-control" (change)="onFileSelected($event)" required />
            <span class="text-danger" *ngIf="validationError && !fileToUpload">This field is required.</span>
            </div>
          </div>

        <button class="btn btn-primary" (click)="submit()">Submit</button>
      </div>
    </div>

    <!-- Right side - Table -->
    <div class="col-md-8">
      <h5 *ngIf="results.length > 0" >Results</h5>
      <mat-progress-bar *ngIf="showLoader" mode="indeterminate"></mat-progress-bar>

      <table *ngIf="results.length > 0" class="table table-sm table-bordered" style="font-size:13px;">
        <thead>
          <tr>
            <th>Scope</th>
            <th>Account Id</th>
            <th>Product Id</th>
            <th>Product Name</th>
            <th>Sync Message</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let result of results table-striped">
            <td>{{ result.scope }}</td>
            <td>{{ result.accountId }}</td>
            <td>
              <a [href]="(result.scope.toLowerCase() === 'prod') ? 'https://ion.tdsynnex.com/v2/products/' : 'https://smp.shadow.apptium.com/v2/products/' + result.productId" target="_blank">
                {{ result.productId }}
              </a>
            </td>
            <td>{{ result.displayName }}</td>
            <td><div [innerHTML]="result.syncMessage"></div></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
